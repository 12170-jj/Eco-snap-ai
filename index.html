<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>Eco Snap AI</title>
<style>
body{font-family:sans-serif;background:#f4f7f6;margin:0}
.container{max-width:900px;margin:auto;padding:20px}
h1{text-align:center;color:#2e7d32}
.card{background:#fff;padding:20px;border-radius:10px;margin-bottom:20px}
button{padding:10px 20px;border:none;border-radius:6px;cursor:pointer}
.primary{background:#4caf50;color:#fff}
.secondary{background:#607d8b;color:#fff}
input,select{width:100%;padding:10px;margin:6px 0}
.hidden{display:none}
.gold{background:#ffd700}
.gray{background:#e0e0e0}
</style>
</head>
<body>

<div class="container">
<h1>Eco Snap AI</h1>
<p style="text-align:center">เลือกบทบาทของคุณเพื่อเข้าสู่ระบบ</p>

<!-- เลือกบทบาท -->
<div class="card" id="roleBox">
  <button class="primary" onclick="chooseRole('student')">นักเรียน</button>
  <button class="secondary" onclick="chooseRole('teacher')">คุณครู</button>
</div>

<!-- นักเรียนล็อกอิน -->
<div class="card hidden" id="studentLogin">
  <h3>นักเรียน</h3>
  <input id="sName" placeholder="ชื่อ - นามสกุล">
  <input id="sId" placeholder="รหัสนักเรียน">
  <select id="sRoom"></select>
  <button class="primary" onclick="loginStudent()">เข้าสู่ระบบ</button>
</div>

<!-- ครูล็อกอิน -->
<div class="card hidden" id="teacherLogin">
  <h3>คุณครู</h3>
  <input id="tCode" type="password" placeholder="รหัสครู">
  <button class="primary" onclick="loginTeacher()">เข้าสู่ระบบ</button>
</div>

<!-- ครูแดชบอร์ด -->
<div class="card hidden" id="teacherDash">
  <h3>ตารางคะแนน</h3>
  <select id="roomFilter" onchange="renderTable()"></select>
  <div id="table"></div>
</div>
</div>

<script>
const ROOMS=[
"1/1","1/2","1/3","1/4","1/5",
"2/1","2/2","2/3","2/4","2/5",
"3/1","3/2","3/3","3/4",
"4/1","4/2","4/3",
"5/1","5/2","5/3","5/4",
"6/1","6/2","6/3"
];

function fillRooms(){
  sRoom.innerHTML='<option value="">เลือกห้อง</option>';
  roomFilter.innerHTML='<option value="">ทุกห้อง</option>';
  ROOMS.forEach(r=>{
    sRoom.innerHTML+=`<option>${r}</option>`;
    roomFilter.innerHTML+=`<option>${r}</option>`;
  });
}
fillRooms();

function chooseRole(r){
  roleBox.classList.add("hidden");
  if(r==="student") studentLogin.classList.remove("hidden");
  else teacherLogin.classList.remove("hidden");
}

function loginStudent(){
  if(!sName.value||!sId.value||!sRoom.value) return alert("กรอกข้อมูลให้ครบ");
  if(!localStorage[sId.value]){
    localStorage[sId.value]=JSON.stringify({name:sName.value,id:sId.value,room:sRoom.value,score:0});
  }
  alert("เข้าสู่ระบบนักเรียนสำเร็จ (เดโม)");
}

function loginTeacher(){
  if(tCode.value!=="Eco2026") return alert("รหัสไม่ถูกต้อง");
  teacherLogin.classList.add("hidden");
  teacherDash.classList.remove("hidden");
  renderTable();
}

function renderTable(){
  let users=Object.values(localStorage).map(v=>JSON.parse(v));
  if(roomFilter.value) users=users.filter(u=>u.room===roomFilter.value);
  users.sort((a,b)=>b.score-a.score);
  table.innerHTML="";
  users.forEach((u,i)=>{
    let cls="";
    if(!roomFilter.value && i<3) cls="gold";
    if(roomFilter.value && i<3) cls="gray";
    table.innerHTML+=`<div class="${cls}">${i+1}. ${u.name} (${u.room}) - ${u.score} คะแนน</div>`;
  });
}
</script>
</body>
</html>
